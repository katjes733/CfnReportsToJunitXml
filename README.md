# CfnReportsToJunitXml
Turn CloudFormation reports generated by cfn-lint, cfn-nag and others to JUnit XML reports that can be used with AWS CodeBuild

## Report generation
Two things are needed to generate a JUnit XML report using this script:
1. A rules file
1. the scan result

### cfn_nag
Create the rules file:
```bash
cfn_nag_rules --output-format=json > cfn_nag_rules.json
```
Scan the templates
```bash
cfn_nag_scan --input-path $PATH_TO_TEMPLATES --fail-on-warnings --output-format=json > cfn_nag_result.json
```

### cfn_lint
Create the rules file:
```bash
cfn-lint --list-rules > cfn_lint_rules.txt
```
Scan the templates
```bash
cfn-lint %PATH_TO_TEMPLATES%/*.yml --format json > cfn_lint_result.json
```

## Parameters
| Parameter | Description | Mandatory | Allowed values |
| --- | --- | --- | --- |
| report | The file name of the scan report | yes | Any valid scan report file name |
| reportType | The report type to use as conversion basis | yes | CFN-NAG, CFN-LINT |
| output | The output xml file name of the generated JSON configuration | yes | Must be valid filename ending on .xml |
| rules | The file name of the rules file | yes, for reportType CFN-LINT and CFN-NAG | Any valid rules file name |
| pathToTemplates | The path to the CloudFormation templates | yes, for reportType CFN-LINT | Any valid path |
| logLevel | A valid log level. If none provided, info is used | no | critical, error, warn, warning, info ,debug |